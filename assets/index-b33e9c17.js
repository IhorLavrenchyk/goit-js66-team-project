(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))r(o);new MutationObserver(o=>{for(const c of o)if(c.type==="childList")for(const a of c.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&r(a)}).observe(document,{childList:!0,subtree:!0});function n(o){const c={};return o.integrity&&(c.integrity=o.integrity),o.referrerpolicy&&(c.referrerPolicy=o.referrerpolicy),o.crossorigin==="use-credentials"?c.credentials="include":o.crossorigin==="anonymous"?c.credentials="omit":c.credentials="same-origin",c}function r(o){if(o.ep)return;o.ep=!0;const c=n(o);fetch(o.href,c)}})();const h="api-key=9GYTd3hNgT1cJMME7q1HMJAu02NGsmfm",y="https://api.nytimes.com",A="https://www.nytimes.com",S=`${y}/svc/topstories/v2/arts.json?${h}`,E=`${y}/svc/search/v2/articlesearch.json?`;document.addEventListener("DOMContentLoaded",q);const L=async()=>{try{const e=await fetch(S);if(e.ok===!1)throw new Error("Such a request has not been found");const n=(await e.json()).results;v(n)}catch(e){console.log(e.message)}},O=document.querySelector(".page-header__search-input");O.addEventListener("change",$);function $(e){const t=e.target.value;console.log(t),N(t)}function q(e){e.preventDefault(),L()}const N=async e=>{try{const t=await fetch(`${E}q=${e}&${h}`);if(t.ok===!1)throw new Error("Such a request has not been found");const r=(await t.json()).response.docs;v(r)}catch(t){console.log(t.message)}};function v(e){const t=e.map(n=>({section:n.section_name||n.section,title:n.title||n.headline.main,description:n.abstract,url:n.web_url||n.url,date:n.pub_date||n.created_date,img:`${A}/${n.multimedia[1].url}`}));console.log(t)}function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var j="previous",F="current",x="next",p=function(e){var t=arguments.length>1&&arguments[1]!==void 0?arguments[1]:"0";return e<10?t+e:e},l=function(e){return"".concat(e.getFullYear(),"-").concat(p(e.getMonth()+1),"-").concat(p(e.getDate()))},w=function(e){return new Date(e.getFullYear(),e.getMonth()+1,0).getDate()},m=function(e){return new Promise(function(t){var n=[],r=k(e).map(function(a){return{date:a.date,iso:a.iso,type:j}}),o=P(e).map(function(a){return{date:a.date,iso:a.iso,type:F}});n=n.concat(r).concat(o);var c=Y(e,n.length).map(function(a){return{date:a.date,iso:a.iso,type:x}});t(n.concat(c))})},d=function(e){return function(t){return Array(e).fill().map(t)}},P=function(e){var t=w(e);return d(t)(function(n,r){var o=r+1;return e.setDate(o),{date:o,iso:l(e)}})},k=function(e){var t,n,r=e.getMonth(),o=e.getFullYear(),c=Math.min(r-1,11),a=new Date(o,c),s=w(a),i=s-(t=e,n=new Date(t.getFullYear(),t.getMonth(),1).toDateString().substring(0,3),["Sun","Mon","Tue","Wed","Thu","Fri","Sat"].indexOf(n))+1;return d(s-i+1)(function(U,M){var g=i+M;return a.setDate(g),{date:g,iso:l(a)}})},Y=function(e,t){var n=42-t,r=e.getMonth()+1===12?0:e.getMonth()+1,o=r===0?e.getFullYear()+1:e.getFullYear(),c=new Date(o,r);return d(n)(function(a,s){var i=s+1;return c.setDate(i),{date:i,iso:l(c)}})},I=function(){function e(){(function(r,o){if(!(r instanceof o))throw new TypeError("Cannot call a class as a function")})(this,e)}var t,n;return t=e,(n=[{key:"getDates",value:function(r){return new Promise(function(o){return o(m(r).then(function(c){return c.map(function(a){return a})}))})}},{key:"getMatrix",value:function(r){return new Promise(function(o){o(m(r).then(function(c){return c.reduce(function(a,s,i){return(i%7==0?a.push([s]):a[a.length-1].push(s))&&a},[])}))})}}])&&T(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),B=I;const D=new B;document.querySelector(".calendar__input");const C=document.querySelector(".calendar__body"),H=document.querySelector("#calend-btn"),u=["January","February","March","April","May","June","July","August","September","October","November","December"];H.addEventListener("click",R);const J=async()=>{const e=await D.getMatrix(new Date);console.log("ðŸš€ ~ file: calendar.js:17 ~ main ~ datesArr",e);const t=new Date,n=[u[t.getMonth()],t.getFullYear()],r=f(e);G(e),console.log("ðŸš€ ~ file: calendar.js:28 ~ main ~ croppedArr",r),b(r),_(n)};async function R(){const t=document.querySelector(".calend-month").textContent.split(" ");let n=u.indexOf(t[0]);console.log("date:",t),n===11?(n=0,t[1]=+t[1]+1,console.log("date:",t)):n+=1;const r=await D.getMatrix(new Date(`${t[1]}, ${u[n]}`)),o=f(r);console.log("ðŸš€ ~ file: calendar.js:28 ~ main ~ croppedArr",o),b(o),_([u[n],t[1]])}function _([e,t]){const n=document.querySelector(".calendar__body"),r=n.querySelector("p");r&&r.remove(),n.insertAdjacentHTML("afterbegin",`<p class="calend-month">${e} ${t}</p>`)}function b(e){const t=document.querySelector(".calendar__list"),n=new Date().getDate();t.innerHTML=`${e.map(r=>n===r.date?`<li class="calendar__date active">${r.date}</li>`:`<li class="calendar__date">${r.date}</li>`).join("")}`}function f(e){const t=e.flat();return console.log("cropped",t),[...t].slice(1,36)}function G(e){const t=f(e);console.log(t)}C.addEventListener("click",K);function K(e){console.log(e.target.className),e.target.className==="calendar__date"&&e.target.classList.toggle("checked")}J();
